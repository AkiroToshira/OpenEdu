{% extends 'core/header.html' %}
{% block content %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/classes.css' %}"/>
<body>
<script src="https://kit.fontawesome.com/f9bf105099.js" crossorigin="anonymous"></script>
<link
        rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<body>
<div class="main-container">
    <div class="container">
        {% for lesson in get_lesson %}
        <a href="lesson/{{ lesson.id }}" class="col">
            <div class="inner-information"><span>{{ lesson.name }}</span></div>
        </a>
        {% endfor %}
    </div>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
        Додати дедлайн
    </button>
    <div class="deadline-container">
        <table class="content-table">
            <thead>
            <tr>
                <th>Статус</th>
                <th>Назва предмату</th>
                <th>Назва задачі</th>
                <th>Дедлайн</th>
                <th>Група</th>
            </tr>
            </thead>
            <tbody>
            {% for x in get_deadlines %}
            <tr>
                <td class="checkbox"><input type="checkbox" name="myTextEditBox" value="checked"/></td>
                <td>{{ x.lesson }}</td>
                <td>{{ x.name }}</td>
                <td>{{ x.deadline_time }}</td>
                <td>{{ x.groups }}</td>
                <td><a href="{% url 'deletedeadlines' x.id %}">Delete</a>
                 <a href="{% url 'editdeadline' x.id %}">Edit</a></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form enctype="multipart/form-data" action="" method="post">
                    {% csrf_token %}
                    <tr>
                        <th>
                            <label for="id_name">Name:</label>
                            <input type="text" name="name" maxlength="20" required id="id_name"><br>
                            <label for="id_deadline_time">Deadline time:</label>
                            <input type="date" name="deadline_time" required id="id_deadline_time"><br>
                            <label for="id_lesson">Lesson:</label>
                            <select name="lesson" required id="id_lesson">
                                {% for lesson in get_lesson %}
                                <option value="{{ lesson.id}}">{{ lesson.name }}</option>
                                {% endfor %}
                            </select><br>
                            <label for="id_group">Group:</label>
                            <select name="group" required id="id_group">
                                {% for group in get_group %}
                                <option value="{{ lesson.id}}">{{ group.name }}</option>
                                {% endfor %}
                            </select><br>
                            <div class="modal-footer">
                                <button type="submit" name="button">Add</button>
                            </div>
                        </th>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>×</span></button>
                <h4 class="modal-title">Заголовок модального окна</h4>
            </div>
            <div class="modal-body">
                <p id="content"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    // при открытии модального окна
    $('#myModal').on('show.bs.modal', event => {
        // получить кнопку, которая его открыло
        let button = $(event.relatedTarget)
        // извлечь информацию из атрибута data-content
        let content = button.data('xid')
        console.log(content)
        // вывести эту информацию в элемент, имеющий id="content"
        $('.modal-body > #content').text(content);
    })
</script>
{% endblock content %}

